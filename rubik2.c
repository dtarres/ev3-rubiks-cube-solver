#pragma config(Sensor, S1, tocsensor, sensorEV3_Touch)
#pragma config(Sensor, S2, barreja, sensorEV3_Touch)
#pragma config(Sensor, S3, apretar, sensorEV3_Touch)
#pragma config(Sensor, S4, color, sensorEV3_Color, modeEV3Color_Color)
#pragma config(Motor, motorA, sensor, tmotorNXT, PIDControl, encoder)
#pragma config(Motor, motorB, base, tmotorNXT, PIDControl, encoder)
#pragma config(Motor, motorC, agafa, tmotorEV3_Large, PIDControl, encoder)
#pragma config(Motor, motorD, cop, tmotorEV3_Large, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

char cub[6][9];
char cub2[6][9];
int u_p_var;
int b_180;
int cmr = 0;
int cmt = 0;
void copia_cubs() {
    int i_cop2;
    int i_cop;
    for (i_cop = 0; i_cop <= 5; i_cop++) {
        for (i_cop2 = 0; i_cop2 <= 8; i_cop2++) {
            cub2[i_cop][i_cop2] = cub[i_cop][i_cop2];
        }
    }
}

void base_90_H() { //mou la base del cub 1/4 de volta en sentit horari
    moveMotorTarget(base, 630, -100);
    waitUntilMotorStop(base);
    cmt++;
    copia_cubs();
    //cara superior//2
    //arestes
    cub[2][1] = cub2[2][3];
    cub[2][5] = cub2[2][1];
    cub[2][7] = cub2[2][5];
    cub[2][3] = cub2[2][7];
    //cantonades
    cub[2][0] = cub2[2][6];
    cub[2][2] = cub2[2][0];
    cub[2][8] = cub2[2][2];
    cub[2][6] = cub2[2][8];
    //cara 4
    cub[4][4] = cub2[3][4];
    //arestes
    cub[4][1] = cub2[3][3];
    cub[4][5] = cub2[3][1];
    cub[4][7] = cub2[3][5];
    cub[4][3] = cub2[3][7];
    //cantonades
    cub[4][0] = cub2[3][6];
    cub[4][2] = cub2[3][0];
    cub[4][8] = cub2[3][2];
    cub[4][6] = cub2[3][8];
    //cara 1
    cub[1][4] = cub2[4][4];
    //arestes
    cub[1][1] = cub2[4][3];
    cub[1][5] = cub2[4][1];
    cub[1][7] = cub2[4][5];
    cub[1][3] = cub2[4][7];
    //cantonades
    cub[1][2] = cub2[4][0];
    cub[1][8] = cub2[4][2];
    cub[1][6] = cub2[4][8];
    cub[1][0] = cub2[4][6];
    //cara 0
    cub[0][4] = cub2[1][4];
    //arestes
    cub[0][1] = cub2[1][3];
    cub[0][5] = cub2[1][1];
    cub[0][7] = cub2[1][5];
    cub[0][3] = cub2[1][7];
    //cantonades
    cub[0][2] = cub2[1][0];
    cub[0][8] = cub2[1][2];
    cub[0][6] = cub2[1][8];
    cub[0][0] = cub2[1][6];
    //cara 3
    cub[3][4] = cub2[0][4];
    //arestes
    cub[3][1] = cub2[0][3];
    cub[3][5] = cub2[0][1];
    cub[3][7] = cub2[0][5];
    cub[3][3] = cub2[0][7];
    //cantonades
    cub[3][0] = cub2[0][6];
    cub[3][2] = cub2[0][0];
    cub[3][8] = cub2[0][2];
    cub[3][6] = cub2[0][8];
    //cara inferior//5
    //arestes
    cub[5][1] = cub2[5][5];
    cub[5][5] = cub2[5][7];
    cub[5][7] = cub2[5][3];
    cub[5][3] = cub2[5][1];
    //cantonades
    cub[5][2] = cub2[5][8];
    cub[5][8] = cub2[5][6];
    cub[5][6] = cub2[5][0];
    cub[5][0] = cub2[5][2];

}

void base_90_AH() { //mou la base del cub 1/4 de volta en sentit antihorari
    moveMotorTarget(base, 630, 100);
    waitUntilMotorStop(base);
    cmt++;
    copia_cubs();
    //cara superior//2
    //arestes
    cub[2][1] = cub2[2][5];
    cub[2][5] = cub2[2][7];
    cub[2][7] = cub2[2][3];
    cub[2][3] = cub2[2][1];
    //cantonades
    cub[2][0] = cub2[2][2];
    cub[2][2] = cub2[2][8];
    cub[2][8] = cub2[2][6];
    cub[2][6] = cub2[2][0];
    //cara 4
    cub[4][4] = cub2[1][4];
    //arestes
    cub[4][1] = cub2[1][5];
    cub[4][5] = cub2[1][7];
    cub[4][7] = cub2[1][3];
    cub[4][3] = cub2[1][1];
    //cantonades
    cub[4][0] = cub2[1][2];
    cub[4][2] = cub2[1][8];
    cub[4][8] = cub2[1][6];
    cub[4][6] = cub2[1][0];
    //cara 1
    cub[1][4] = cub2[0][4];
    //arestes
    cub[1][1] = cub2[0][5];
    cub[1][5] = cub2[0][7];
    cub[1][7] = cub2[0][3];
    cub[1][3] = cub2[0][1];
    //cantonades
    cub[1][2] = cub2[0][8];
    cub[1][8] = cub2[0][6];
    cub[1][6] = cub2[0][0];
    cub[1][0] = cub2[0][2];
    //cara 0
    cub[0][4] = cub2[3][4];
    //arestes
    cub[0][1] = cub2[3][5];
    cub[0][5] = cub2[3][7];
    cub[0][7] = cub2[3][3];
    cub[0][3] = cub2[3][1];
    //cantonades
    cub[0][2] = cub2[3][8];
    cub[0][8] = cub2[3][6];
    cub[0][6] = cub2[3][0];
    cub[0][0] = cub2[3][2];
    //cara 3
    cub[3][4] = cub2[4][4];
    //arestes
    cub[3][1] = cub2[4][5];
    cub[3][5] = cub2[4][7];
    cub[3][7] = cub2[4][3];
    cub[3][3] = cub2[4][1];
    //cantonades
    cub[3][0] = cub2[4][2];
    cub[3][2] = cub2[4][8];
    cub[3][8] = cub2[4][6];
    cub[3][6] = cub2[4][0];
    //cara inferior//5
    //arestes
    cub[5][1] = cub2[5][3];
    cub[5][5] = cub2[5][1];
    cub[5][7] = cub2[5][5];
    cub[5][3] = cub2[5][7];
    //cantonades
    cub[5][2] = cub2[5][0];
    cub[5][8] = cub2[5][2];
    cub[5][6] = cub2[5][8];
    cub[5][0] = cub2[5][6];
}

void base_180() { //mou la base del cub 1/2 volta
    if (b_180 == 0) {
        moveMotorTarget(base, 1260, -100);
        waitUntilMotorStop(base);
        b_180 = 1;
    } else {
        moveMotorTarget(base, 1260, 100);
        waitUntilMotorStop(base);
        b_180 = 0;
    }
    cmt++;
    copia_cubs();
    //cara superior//2
    //arestes
    cub[2][1] = cub2[2][3];
    cub[2][5] = cub2[2][1];
    cub[2][7] = cub2[2][5];
    cub[2][3] = cub2[2][7];
    //cantonades
    cub[2][0] = cub2[2][6];
    cub[2][2] = cub2[2][0];
    cub[2][8] = cub2[2][2];
    cub[2][6] = cub2[2][8];
    //cara 4
    cub[4][4] = cub2[3][4];
    //arestes
    cub[4][1] = cub2[3][3];
    cub[4][5] = cub2[3][1];
    cub[4][7] = cub2[3][5];
    cub[4][3] = cub2[3][7];
    //cantonades
    cub[4][0] = cub2[3][6];
    cub[4][2] = cub2[3][0];
    cub[4][8] = cub2[3][2];
    cub[4][6] = cub2[3][8];
    //cara 1
    cub[1][4] = cub2[4][4];
    //arestes
    cub[1][1] = cub2[4][3];
    cub[1][5] = cub2[4][1];
    cub[1][7] = cub2[4][5];
    cub[1][3] = cub2[4][7];
    //cantonades
    cub[1][2] = cub2[4][0];
    cub[1][8] = cub2[4][2];
    cub[1][6] = cub2[4][8];
    cub[1][0] = cub2[4][6];
    //cara 0
    cub[0][4] = cub2[1][4];
    //arestes
    cub[0][1] = cub2[1][3];
    cub[0][5] = cub2[1][1];
    cub[0][7] = cub2[1][5];
    cub[0][3] = cub2[1][7];
    //cantonades
    cub[0][2] = cub2[1][0];
    cub[0][8] = cub2[1][2];
    cub[0][6] = cub2[1][8];
    cub[0][0] = cub2[1][6];
    //cara 3
    cub[3][4] = cub2[0][4];
    //arestes
    cub[3][1] = cub2[0][3];
    cub[3][5] = cub2[0][1];
    cub[3][7] = cub2[0][5];
    cub[3][3] = cub2[0][7];
    //cantonades
    cub[3][0] = cub2[0][6];
    cub[3][2] = cub2[0][0];
    cub[3][8] = cub2[0][2];
    cub[3][6] = cub2[0][8];
    //cara inferior//5
    //arestes
    cub[5][1] = cub2[5][5];
    cub[5][5] = cub2[5][7];
    cub[5][7] = cub2[5][3];
    cub[5][3] = cub2[5][1];
    //cantonades
    cub[5][2] = cub2[5][8];
    cub[5][8] = cub2[5][6];
    cub[5][6] = cub2[5][0];
    cub[5][0] = cub2[5][2];
    copia_cubs();
    //cara superior//2
    //arestes
    cub[2][1] = cub2[2][3];
    cub[2][5] = cub2[2][1];
    cub[2][7] = cub2[2][5];
    cub[2][3] = cub2[2][7];
    //cantonades
    cub[2][0] = cub2[2][6];
    cub[2][2] = cub2[2][0];
    cub[2][8] = cub2[2][2];
    cub[2][6] = cub2[2][8];
    //cara 4
    cub[4][4] = cub2[3][4];
    //arestes
    cub[4][1] = cub2[3][3];
    cub[4][5] = cub2[3][1];
    cub[4][7] = cub2[3][5];
    cub[4][3] = cub2[3][7];
    //cantonades
    cub[4][0] = cub2[3][6];
    cub[4][2] = cub2[3][0];
    cub[4][8] = cub2[3][2];
    cub[4][6] = cub2[3][8];
    //cara 1
    cub[1][4] = cub2[4][4];
    //arestes
    cub[1][1] = cub2[4][3];
    cub[1][5] = cub2[4][1];
    cub[1][7] = cub2[4][5];
    cub[1][3] = cub2[4][7];
    //cantonades
    cub[1][2] = cub2[4][0];
    cub[1][8] = cub2[4][2];
    cub[1][6] = cub2[4][8];
    cub[1][0] = cub2[4][6];
    //cara 0
    cub[0][4] = cub2[1][4];
    //arestes
    cub[0][1] = cub2[1][3];
    cub[0][5] = cub2[1][1];
    cub[0][7] = cub2[1][5];
    cub[0][3] = cub2[1][7];
    //cantonades
    cub[0][2] = cub2[1][0];
    cub[0][8] = cub2[1][2];
    cub[0][6] = cub2[1][8];
    cub[0][0] = cub2[1][6];
    //cara 3
    cub[3][4] = cub2[0][4];
    //arestes
    cub[3][1] = cub2[0][3];
    cub[3][5] = cub2[0][1];
    cub[3][7] = cub2[0][5];
    cub[3][3] = cub2[0][7];
    //cantonades
    cub[3][0] = cub2[0][6];
    cub[3][2] = cub2[0][0];
    cub[3][8] = cub2[0][2];
    cub[3][6] = cub2[0][8];
    //cara inferior//5
    //arestes
    cub[5][1] = cub2[5][5];
    cub[5][5] = cub2[5][7];
    cub[5][7] = cub2[5][3];
    cub[5][3] = cub2[5][1];
    //cantonades
    cub[5][2] = cub2[5][8];
    cub[5][8] = cub2[5][6];
    cub[5][6] = cub2[5][0];
    cub[5][0] = cub2[5][2];
}

void gir_90_H() { //gira la primera capa del cub 1/4 de volta en sentit horari
    moveMotorTarget(agafa, 30, -20);
    waitUntilMotorStop(agafa);
    moveMotorTarget(base, 755, -100);
    waitUntilMotorStop(base);
    moveMotorTarget(agafa, 10, 40);
    waitUntilMotorStop(agafa);
    moveMotorTarget(agafa, 20, 20);
    moveMotorTarget(base, 125, 100);
    waitUntilMotorStop(base);
    waitUntilMotorStop(agafa);
    cmt++;
    cmr++;
    copia_cubs();

    //cara 0
    cub[0][0] = cub2[1][6];
    cub[0][1] = cub2[1][3];
    cub[0][2] = cub2[1][0];
    //cara 3
    cub[3][2] = cub2[0][0];
    cub[3][5] = cub2[0][1];
    cub[3][8] = cub2[0][2];
    //cara 4
    cub[4][8] = cub2[3][2];
    cub[4][7] = cub2[3][5];
    cub[4][6] = cub2[3][8];
    //cara 1
    cub[1][0] = cub2[4][6];
    cub[1][3] = cub2[4][7];
    cub[1][6] = cub2[4][8];
    //cara 5, la inferior
    //arestes
    cub[5][1] = cub2[5][5];
    cub[5][5] = cub2[5][7];
    cub[5][7] = cub2[5][3];
    cub[5][3] = cub2[5][1];
    //cantonades
    cub[5][2] = cub2[5][8];
    cub[5][8] = cub2[5][6];
    cub[5][6] = cub2[5][0];
    cub[5][0] = cub2[5][2];

}

void gir_90_AH() { //mou la primera capa del cub 1/4 de volra en sentit antihorari
    moveMotorTarget(agafa, 30, -20);
    waitUntilMotorStop(agafa);
    moveMotorTarget(base, 755, 100);
    waitUntilMotorStop(base);
    moveMotorTarget(agafa, 10, 40);
    waitUntilMotorStop(agafa);
    moveMotorTarget(agafa, 20, 20);
    moveMotorTarget(base, 125, -100);
    waitUntilMotorStop(base);
    waitUntilMotorStop(agafa);
    cmt++;
    cmr++;
    copia_cubs();

    //cara 0
    cub[0][0] = cub2[3][2];
    cub[0][1] = cub2[3][5];
    cub[0][2] = cub2[3][8];
    //cara 3
    cub[3][2] = cub2[4][8];
    cub[3][5] = cub2[4][7];
    cub[3][8] = cub2[4][6];
    //cara 4
    cub[4][8] = cub2[1][6];
    cub[4][7] = cub2[1][3];
    cub[4][6] = cub2[1][0];
    //cara 1
    cub[1][0] = cub2[0][2];
    cub[1][3] = cub2[0][1];
    cub[1][6] = cub2[0][0];
    //cara 5, la inferior
    //arestes
    cub[5][1] = cub2[5][3];
    cub[5][5] = cub2[5][1];
    cub[5][7] = cub2[5][5];
    cub[5][3] = cub2[5][7];
    //cantonades
    cub[5][2] = cub2[5][0];
    cub[5][8] = cub2[5][2];
    cub[5][6] = cub2[5][8];
    cub[5][0] = cub2[5][6];

}

void gir_180() {
    moveMotorTarget(agafa, 30, -20);
    waitUntilMotorStop(agafa);
    moveMotorTarget(base, 1400, 100);
    waitUntilMotorStop(base);
    moveMotorTarget(agafa, 30, 20);
    waitUntilMotorStop(agafa);
    moveMotorTarget(base, 140, -100);
    waitUntilMotorStop(base);
    cmr++;
    cmt++;
    copia_cubs();

    //comenca els moviments de cares

    //cara 0
    cub[0][0] = cub2[4][8];
    cub[0][1] = cub2[4][7];
    cub[0][2] = cub2[4][6];
    //cara 3
    cub[3][2] = cub2[1][6];
    cub[3][5] = cub2[1][3];
    cub[3][8] = cub2[1][0];
    //cara 4
    cub[4][8] = cub2[0][0];
    cub[4][7] = cub2[0][1];
    cub[4][6] = cub2[0][2];
    //cara 1
    cub[1][0] = cub2[3][8];
    cub[1][3] = cub2[3][5];
    cub[1][6] = cub2[3][2];
    //cara 5, la inferior
    //arestes
    cub[5][1] = cub2[5][7];
    cub[5][5] = cub2[5][3];
    cub[5][7] = cub2[5][1];
    cub[5][3] = cub2[5][5];
    //cantonades
    cub[5][2] = cub2[5][6];
    cub[5][8] = cub2[5][0];
    cub[5][6] = cub2[5][2];
    cub[5][0] = cub2[5][8];

}

void cop_90() {
    moveMotorTarget(agafa, 18, -30);
    waitUntilMotorStop(agafa);
    moveMotorTarget(cop, 93, -50);
    waitUntilMotorStop(cop);
    moveMotorTarget(agafa, 12, -20);
    moveMotorTarget(cop, 93, 30);
    waitUntilMotorStop(agafa);
    moveMotorTarget(agafa, 30, 20);
    waitUntilMotorStop(agafa);
    waitUntilMotorStop(cop);
    cmt++;

    copia_cubs();

    //comenca amb la copia dels cubs:
    //les cares 1 i 3 no es mouen de posicio pero si que giren sobre elles mateixes
    //les cares 1, 2, 4, 5 si que es mouen de posicio

    //cara 0
    //centre
    cub[0][4] = cub2[5][4];
    //arestes
    cub[0][1] = cub2[5][1];
    cub[0][5] = cub2[5][5];
    cub[0][7] = cub2[5][7];
    cub[0][3] = cub2[5][3];
    //cantonades
    cub[0][2] = cub2[5][2];
    cub[0][8] = cub2[5][8];
    cub[0][6] = cub2[5][6];
    cub[0][0] = cub2[5][0];
    //cara 2
    //centre
    cub[2][4] = cub2[0][4];
    //arestes
    cub[2][1] = cub2[0][1];
    cub[2][5] = cub2[0][5];
    cub[2][7] = cub2[0][7];
    cub[2][3] = cub2[0][3];
    //cantonades
    cub[2][2] = cub2[0][2];
    cub[2][8] = cub2[0][8];
    cub[2][6] = cub2[0][6];
    cub[2][0] = cub2[0][0];
    //cara 4
    //centre
    cub[4][4] = cub2[2][4];
    //arestes
    cub[4][1] = cub2[2][1];
    cub[4][5] = cub2[2][5];
    cub[4][7] = cub2[2][7];
    cub[4][3] = cub2[2][3];
    //cantonades
    cub[4][2] = cub2[2][2];
    cub[4][8] = cub2[2][8];
    cub[4][6] = cub2[2][6];
    cub[4][0] = cub2[2][0];
    //cara 5
    //centre
    cub[5][4] = cub2[4][4];
    //arestes
    cub[5][1] = cub2[4][1];
    cub[5][5] = cub2[4][5];
    cub[5][7] = cub2[4][7];
    cub[5][3] = cub2[4][3];
    //cantonades
    cub[5][2] = cub2[4][2];
    cub[5][8] = cub2[4][8];
    cub[5][6] = cub2[4][6];
    cub[5][0] = cub2[4][0];

    //les dues darreres cares, les que giren sobre elles mateixes, la 1 i la 3

    //cara 1
    //arestes
    cub[1][1] = cub2[1][3];
    cub[1][5] = cub2[1][1];
    cub[1][7] = cub2[1][5];
    cub[1][3] = cub2[1][7];
    //cantonades
    cub[1][2] = cub2[1][0];
    cub[1][8] = cub2[1][2];
    cub[1][6] = cub2[1][8];
    cub[1][0] = cub2[1][6];

    //cara 3
    //arestes
    cub[3][1] = cub2[3][5];
    cub[3][5] = cub2[3][7];
    cub[3][7] = cub2[3][3];
    cub[3][3] = cub2[3][1];
    //cantonades
    cub[3][2] = cub2[3][8];
    cub[3][8] = cub2[3][6];
    cub[3][6] = cub2[3][0];
    cub[3][0] = cub2[3][2];

}

void randomesa() {

    int valorr;
    int rand_s;
    for (rand_s = 0; rand_s <= 40; rand_s++) {
        valorr = random(7);
        switch (valorr) {
        case 0:
            base_180();
            cop_90();
            break;
        case 1:
            base_90_AH();
            break;
        case 2:
            base_90_H();
            break;
        case 3:
            cop_90();
            break;
        case 5:
            gir_180();
            cop_90();
            break;
        case 6:
            gir_90_AH();
            cop_90();
            break;
        case 7:
            gir_90_H();
            cop_90();
            break;
        }
    }
}

char assignacio(int value) {
    char c_3;
    c_3 = ' ';
    switch (value) {
    case 1:
        c_3 = 'n';
        displayCenteredBigTextLine(3, "negre");
        break;
    case 2:
        c_3 = 'b';
        displayCenteredBigTextLine(3, "blau");
        break;
    case 3:
        c_3 = 'g';
        displayCenteredBigTextLine(3, "verd");
        break;
    case 4:
        c_3 = 'y';
        displayCenteredBigTextLine(3, "groc");
        break;
    case 5:
        c_3 = 'r';
        displayCenteredBigTextLine(3, "vermell");
        break;
    case 6:
        c_3 = 'w';
        displayCenteredBigTextLine(3, "blanc");
        break;
    }
    return c_3;
}

void cant_baix_esquerra() {
    //la cantonada ha d'estar a sota del seu lloc correcte
    //i la cantonada ha d'estar a on estaria el vermell
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
}
void cant_baix_dreta() {
    //la cantonada ha d'estar a sota del seu lloc correcta
    //i la cantonada ha d'estar on estaria el vermell
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
}
void cant_a_oposat() {
    //ha d'estar al costat on estaria el vermell i amb la cantonada a l'esquerra
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_180();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
}
void cant_a_dalt_dreta_treure() {
    //treu la cantonada de dalt a la dreta, amb el blanc aixi i ho deixa a sota a la dreta
    //es posa mirant cap a on seria el vermell
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    base_180();
}
void cant_a_dalt_esquerra_treure() {
    //treu la cantonada de dalt a l'esquerra, amb el blanc aixi i ho deixa a sota a la dreta
    //es posa mirant cap a on seria el vermell
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    base_180();
}
void treure_de_dalt() {
    //treu la cantonada si aquesta esta a dalt a la dreta
    //mirant cap on estaria el vermell
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    base_180();
}
void segona_linia_dreta() {
    //esta amb la peca ja posada on toca, es a dir a un dels costats (dreta)
    //la cara del color principal esta enfocada cap a on estaria el vermell
    base_90_AH();
    cop_90();
    gir_90_H();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_90_H();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    cop_90();
}
void segona_linia_esquerra() {
    //esta amb la peca ja posada on toca, es a dir a un dels costats (esquerra)
    //la cara del color principal esta enfocada cap a on estaria el vermell
    base_90_H();
    cop_90();
    gir_90_AH();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_90_AH();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    cop_90();
}
void girar_aresta_2l() {
    //es gira la que hi ha a la dreta, i esta enfocada cap al vermell
    base_90_H();
    cop_90();
    gir_180();
    cop_90();
    gir_180();
    base_90_AH();
    cop_90();
    base_180();
    gir_90_AH();
    base_90_H();
    cop_90();
    gir_180();
    base_180();
    cop_90();
    gir_90_H();
    base_90_H();
    cop_90();
    gir_180();
    base_90_H();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    cop_90();
    base_90_H();
}
void linia_groga() {
    //amb la linia per fer-la enfocant on estava abans el vermell
    cop_90();
    gir_90_AH();
    base_90_H();
    cop_90();
    gir_90_AH();
    base_90_AH();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_90_AH();
    cop_90();
    gir_90_H();
    cop_90();
    base_180();
}
void l_groga() {
    //amb la ela cap al verd i vermell quan esta el vermell cap al motor cop
    cop_90();
    gir_90_AH();
    cop_90();
    gir_90_AH();
    base_90_H();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_90_H();
    cop_90();
    gir_90_H();
    base_90_AH();
    cop_90();
    base_180();
}
void gir_per_peix() {
    //es posa amb la cara com es faria a ma cap al motor del cop
    base_90_H();
    cop_90();
    gir_90_AH();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_180();
    base_180();
    cop_90();
    gir_90_H();
    cop_90();
    base_90_H();
}
void tota_ultima_cara() {
    //es posa la cantonada feta al blau-negre
    cop_90();
    gir_90_AH();
    cop_90();
    gir_180();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_H();
    cop_90();
    base_180();
}
void arestes_grogues_esquerra() {
    //amb l'aresta ben col-locada a l'esquerra, on estava al principi el vermell
    //esquerra vol dir que la peca que s'ha de girar perque concordi esta a l'esquerra mirant des de la posada
    base_180();
    cop_90();
    gir_180();
    cop_90();
    gir_90_AH();
    base_90_AH();
    cop_90();
    gir_90_AH();
    cop_90();
    cop_90();
    gir_90_H();
    base_90_AH();
    cop_90();
    gir_180();
    cop_90();
    gir_90_H();
    cop_90();
    cop_90();
    gir_90_AH();
    base_90_H();
    cop_90();
    gir_90_AH();
    base_90_AH();
    cop_90();
    gir_180();
    cop_90();
}
void arestes_grogues_dreta() {
    //amb l'aresta ben col-locada a l'esquerra, on estava al principi el vermell
    //dreta vol dir que la peca que s'ha de girar perque concordi esta a la dreta mirant des de la posada
    base_180();
    cop_90();
    gir_180();
    cop_90();
    gir_90_H();
    base_90_H();
    cop_90();
    gir_90_H();
    cop_90();
    cop_90();
    gir_90_AH();
    base_90_H();
    cop_90();
    gir_180();
    cop_90();
    gir_90_AH();
    cop_90();
    cop_90();
    gir_90_H();
    base_90_AH();
    cop_90();
    gir_90_H();
    base_90_H();
    cop_90();
    gir_180();
    cop_90();
}
void ultim_pas() {
    //amb la cantonada correcta a dalt a la dreta, entre el sensor i el cop
    //deia el cub girat 180 graus respecte la posicio inicial
    cop_90();
    gir_180();
    base_90_H();
    cop_90();
    gir_180();
    base_180();
    cop_90();
    gir_90_AH();
    cop_90();
    gir_90_AH();
    base_180();
    cop_90();
    gir_90_H();
    cop_90();
    gir_180();
    base_180();
    cop_90();
    gir_90_AH();
    cop_90();
    gir_90_H();
    base_180();
    cop_90();
    gir_90_AH();
    base_90_H();
    cop_90();
}
void posar_cub_be() {
    if (cub[2][4] == 'w') {
        if (cub[3][4] == 'r') {
            base_90_H();
        } else if (cub[3][4] == 'g') {
            base_180();
        } else if (cub[3][4] == 'n') {
            base_90_AH();
        }
    } else if (cub[2][4] == 'g') {
        if (cub[3][4] == 'n') {
            base_180();
            cop_90();
            base_90_H();
        } else if (cub[3][4] == 'y') {
            base_90_H();
            cop_90();
            base_90_H();
        } else if (cub[3][4] == 'r') {
            cop_90();
            base_90_H();
        } else if (cub[3][4] == 'w') {
            base_90_AH();
            cop_90();
            base_90_H();
        }
    } else if (cub[2][4] == 'n') {
        if (cub[3][4] == 'y') {
            base_90_H();
            cop_90();
            base_180();
        } else if (cub[3][4] == 'g') {
            cop_90();
            base_180();
        } else if (cub[3][4] == 'w') {
            base_90_AH();
            cop_90();
            base_180();
        } else if (cub[3][4] == 'b') {
            base_180();
            cop_90();
            base_180();
        }
    } else if (cub[2][4] == 'b') {
        if (cub[3][4] == 'y') {
            base_90_H();
            cop_90();
            base_90_AH();
        } else if (cub[3][4] == 'n') {
            cop_90();
            base_90_AH();
        } else if (cub[3][4] == 'w') {
            base_90_AH();
            cop_90();
            base_90_AH();
        } else if (cub[3][4] == 'r') {
            base_180();
            cop_90();
            base_90_AH();
        }
    } else if (cub[2][4] == 'r') {
        if (cub[3][4] == 'g') {
            base_180();
            cop_90();
        } else if (cub[3][4] == 'y') {
            base_90_H();
            cop_90();
        } else if (cub[3][4] == 'b') {
            cop_90();
        } else if (cub[3][4] == 'w') {
            base_90_AH();
            cop_90();
        }
    } else if (cub[2][4] == 'y') {
        if (cub[3][4] == 'b') {
            cop_90();
            cop_90();
        } else if (cub[3][4] == 'r') {
            base_90_AH();
            cop_90();
            cop_90();
        } else if (cub[3][4] == 'g') {
            base_180();
            cop_90();
            cop_90();
        } else if (cub[3][4] == 'n') {
            base_90_H();
            cop_90();
            cop_90();
        }
    }
}
void descansa() {
    sleep(500);
}
char comprovar_array() {
    int ca_blanc = 0, ca_verd = 0, ca_vermell = 0, ca_blau = 0, ca_negre = 0, ca_groc = 0;
    char h;
    h = 'f';
    for (int ca_x = 0; ca_x <= 5; ca_x++) {
        for (int ca_y = 0; ca_y <= 8; ca_y++) {
            switch (cub[ca_x][ca_y]) {
            case 'n':
                ca_negre++;
                break;
            case 'b':
                ca_blau++;
                break;
            case 'g':
                ca_verd++;
                break;
            case 'y':
                ca_groc++;
                break;
            case 'r':
                ca_vermell++;
                break;
            case 'w':
                ca_blanc++;
                break;
            }
        }
    }
    if ((ca_blau == 9) && (ca_groc == 9) && (ca_verd == 9) && (ca_blanc == 9) && (ca_vermell == 9) && (ca_negre == 9)) {
        h = 'v';
    }
    return h;
}
void lectura_cara(int cara) {
    setSensorMode(sensor, 2);
    int compt_lect;
    //mou el sensor al centre/numero 4
    moveMotorTarget(sensor, 435, 35);
    waitUntilMotorStop(sensor);
    descansa();
    cub[cara][4] = assignacio(SensorValue(color));
    //numero 0
    moveMotorTarget(sensor, 109, -35);
    moveMotorTarget(base, 180, -100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][0] = assignacio(SensorValue(color));
    //numero 1
    moveMotorTarget(sensor, 30, 35);
    moveMotorTarget(base, 280, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][1] = assignacio(SensorValue(color));
    //numero 2
    moveMotorTarget(sensor, 40, -35);
    moveMotorTarget(base, 310, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][2] = assignacio(SensorValue(color));
    //numero 5
    moveMotorTarget(sensor, 40, 35);
    moveMotorTarget(base, 310, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][5] = assignacio(SensorValue(color));
    //numero 8
    moveMotorTarget(sensor, 40, -35);
    moveMotorTarget(base, 310, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][8] = assignacio(SensorValue(color));
    //numero 7
    moveMotorTarget(sensor, 40, 35);
    moveMotorTarget(base, 310, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][7] = assignacio(SensorValue(color));
    //numero 6
    moveMotorTarget(sensor, 40, -35);
    moveMotorTarget(base, 310, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][6] = assignacio(SensorValue(color));
    //numero 3
    moveMotorTarget(sensor, 40, 35);
    moveMotorTarget(base, 310, 100);
    waitUntilMotorStop(sensor);
    waitUntilMotorStop(base);
    descansa();
    cub[cara][3] = assignacio(SensorValue(color));
    moveMotorTarget(base, 70, -100);
    moveMotorTarget(sensor, 356, -35);
    waitUntilMotorStop(base);
    waitUntilMotorStop(sensor);
    //al final de la lectura deixa el cub amb un gir de 90 graus en sentit horari
}

task main() {
    int apreta;
    apreta = 0;
    //Fa la lectura de les sis cares
    setMotor(sensor, -20);
    int col_mot_sens;
    col_mot_sens = 1;
    while (col_mot_sens == 1) {
        if (SensorValue(tocsensor) == 0) {
            stopMotor(sensor);
            break;
        }
    }
    moveMotorTarget(sensor, 5, 35);
    waitUntilMotorStop(sensor);

    //comenca el loop de sempre. S'ha de seleccionar un o altre boto
    while (true) {
        displayCenteredBigTextLine(13, "Apreta un boto!");
        int barr_v;
        barr_v = 0;
        apreta = 0;
        while (apreta == 0) {
            if (SensorValue(apretar) == 0) {
                apreta = 0;
            } else {
                apreta = 1;
                break;
            }
            if (SensorValue(barreja) == 0) {
                apreta = 0;
            } else {
                eraseDisplay();
                displayCenteredBigTextLine(3, "Barrejant...");
                randomesa();
                barr_v = 1;
                apreta = 1;
            }
        }

        if (barr_v == 1) {
            displayCenteredBigTextLine(3, "Cub barrejat!");
        } else {
            while (true) {
                eraseDisplay();
                lectura_cara(2);
                //cop
                moveMotorTarget(agafa, 18, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, -40);
                waitUntilMotorStop(cop);
                moveMotorTarget(agafa, 12, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, 30);
                moveMotorTarget(agafa, 30, 20);
                waitUntilMotorStop(agafa);
                waitUntilMotorStop(cop);
                //base_90_AH
                moveMotorTarget(base, 630, 100);
                waitUntilMotorStop(base);
                lectura_cara(1);
                //cop
                moveMotorTarget(agafa, 18, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, -40);
                waitUntilMotorStop(cop);
                moveMotorTarget(agafa, 12, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, 30);
                moveMotorTarget(agafa, 30, 20);
                waitUntilMotorStop(agafa);
                waitUntilMotorStop(cop);
                //base_90_H
                moveMotorTarget(base, 630, -100);
                waitUntilMotorStop(base);
                lectura_cara(5);
                //base_90_AH
                moveMotorTarget(base, 630, 100);
                waitUntilMotorStop(base);
                //cop
                moveMotorTarget(agafa, 18, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, -40);
                waitUntilMotorStop(cop);
                moveMotorTarget(agafa, 12, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, 30);
                moveMotorTarget(agafa, 30, 20);
                waitUntilMotorStop(agafa);
                waitUntilMotorStop(cop);
                lectura_cara(4);
                //base_180
                moveMotorTarget(base, 630, -100);
                waitUntilMotorStop(base);
                moveMotorTarget(base, 630, -100);
                waitUntilMotorStop(base);
                //cop
                moveMotorTarget(agafa, 18, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, -40);
                waitUntilMotorStop(cop);
                moveMotorTarget(agafa, 12, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, 30);
                moveMotorTarget(agafa, 30, 20);
                waitUntilMotorStop(agafa);
                waitUntilMotorStop(cop);
                lectura_cara(3);
                //base_90_AH
                moveMotorTarget(base, 630, 100);
                waitUntilMotorStop(base);
                //cop
                moveMotorTarget(agafa, 18, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, -40);
                waitUntilMotorStop(cop);
                moveMotorTarget(agafa, 12, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, 30);
                moveMotorTarget(agafa, 30, 20);
                waitUntilMotorStop(agafa);
                waitUntilMotorStop(cop);
                //base_90_AH
                moveMotorTarget(base, 630, 100);
                waitUntilMotorStop(base);
                lectura_cara(0);
                //base_90_H
                moveMotorTarget(base, 630, -100);
                waitUntilMotorStop(base);
                //cop
                moveMotorTarget(agafa, 18, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, -40);
                waitUntilMotorStop(cop);
                moveMotorTarget(agafa, 12, -20);
                waitUntilMotorStop(agafa);
                moveMotorTarget(cop, 93, 30);
                moveMotorTarget(agafa, 30, 20);
                waitUntilMotorStop(agafa);
                waitUntilMotorStop(cop);
                //base_180
                moveMotorTarget(base, 630, -100);
                waitUntilMotorStop(base);
                moveMotorTarget(base, 630, -100);
                waitUntilMotorStop(base);
                if (comprovar_array() == 'v') {
                    break;
                }
            }
            posar_cub_be();

            //Ja ha acabat la lectura de les sis cares
            //Comenca la resolucio

            //Fara la creu blanca. Per a aixo, repeteix els condicionals sis vegades
            int i_creu_blanca;
            int i_cant_blanc;
            int i_segona_linia;
            cmt = 0;
            cmr = 0;
            displayCenteredBigTextLine(3, "Resolent...");
            for (i_creu_blanca = 1; i_creu_blanca <= 4; i_creu_blanca++) {
                //comencar a fer els condicionals

                //aquest es el cas en que el costat blanc esta a sota. Arestes
                if (cub[5][5] == 'w') { //el color esta al costat blau
                    if (cub[3][5] == 'b') {
                        base_90_H();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_H();
                    } else if (cub[3][5] == 'n') {
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                    } else if (cub[3][5] == 'r') {
                        gir_90_H();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_180();
                    } else if (cub[3][5] == 'g') {
                        gir_180();
                        base_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_AH();
                    }
                } else if (cub[5][7] == 'w') { //el color esta al costat negre
                    if (cub[0][1] == 'n') {
                        base_180();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                    } else if (cub[0][1] == 'b') {
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_H();
                    } else if (cub[0][1] == 'r') {
                        gir_180();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_180();
                    } else if (cub[0][1] == 'g') {
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_AH();
                    }
                } else if (cub[5][3] == 'w') { //el color esta a la cara verda
                    if (cub[1][3] == 'g') {
                        base_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_AH();
                    } else if (cub[1][3] == 'b') {
                        gir_180();
                        base_90_H();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][3] == 'n') {
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                    } else if (cub[1][3] == 'r') {
                        gir_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_180();
                    }
                } else if (cub[5][1] == 'w') { //el color esta al costat vermell
                    if (cub[4][7] == 'r') {
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_180();
                    } else if (cub[4][7] == 'b') {
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_H();
                    } else if (cub[4][7] == 'n') {
                        gir_180();
                        base_180();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                    } else if (cub[4][7] == 'g') {
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        base_90_AH();
                    }

                    //comenca amb el cas que el costat blanc estigui als laterals del cub a la part mes inferior
                } else if (cub[0][1] == 'w') { // el blanc esta al costat negre
                    if (cub[5][7] == 'n') {
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                    } else if (cub[5][7] == 'b') {
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[5][7] == 'g') {
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[5][7] == 'r') {
                        gir_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    }
                } else if (cub[1][3] == 'w') { //el blanc esta al costat verd
                    if (cub[5][3] == 'g') {
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[5][3] == 'n') {
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                    } else if (cub[5][3] == 'b') {
                        gir_180();
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[5][3] == 'r') {
                        gir_90_AH();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    }
                } else if (cub[4][7] == 'w') { //el color blanc esta al costat vermell
                    if (cub[5][1] == 'r') {
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[5][1] == 'b') {
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[5][1] == 'n') {
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                    } else if (cub[5][1] == 'g') {
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    }
                } else if (cub[3][5] == 'w') { //el blanc esta al costat blau
                    if (cub[5][5] == 'b') {
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[5][5] == 'n') {
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                    } else if (cub[5][5] == 'g') {
                        gir_180();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[5][5] == 'r') {
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    }

                    //acaba d'acabar la collocacio de les cares si el blanc esta a la tercera linia del cub amb el blanc a dalt i mirat lateralment
                    //comenca amb la resolucio si el blanc esta a la linia del mig a l'ESQUERRA.
                    //Despres tocara el mateix si el blanc esta a la linia del mig de la DRETA.

                } else if (cub[3][7] == 'w') { //el blanc esta al costat blau
                    if (cub[4][5] == 'r') {
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        base_180();
                    } else if (cub[4][5] == 'b') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                    } else if (cub[4][5] == 'n') {
                        cop_90();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                    } else if (cub[4][5] == 'g') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                    }
                } else if (cub[4][3] == 'w') { //el blanc esta al costat vermell
                    if (cub[1][7] == 'g') {
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        base_90_AH();
                    } else if (cub[1][7] == 'n') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][7] == 'b') {
                        cop_90();
                        cop_90();
                        gir_180();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][7] == 'r') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_90_H();
                    }
                } else if (cub[1][1] == 'w') { //el blanc esta al costat verd
                    if (cub[0][3] == 'g') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][3] == 'n') {
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                    } else if (cub[0][3] == 'b') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][3] == 'r') {
                        cop_90();
                        cop_90();
                        gir_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_180();
                    }
                } else if (cub[0][5] == 'w') { //el blanc esta al costat negre
                    if (cub[3][1] == 'b') {
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        base_90_H();
                    } else if (cub[3][1] == 'r') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][1] == 'g') {
                        cop_90();
                        cop_90();
                        gir_180();
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][1] == 'n') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    }

                    //comenca amb la resolucio si el blanc esta a la linia del mig a la DRETA.
                } else if (cub[4][5] == 'w') { //el blanc esta al costat vermell
                    if (cub[3][7] == 'r') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][7] == 'g') {
                        cop_90();
                        cop_90();
                        gir_180();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][7] == 'n') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][7] == 'b') {
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        base_90_H();
                    }
                } else if (cub[3][1] == 'w') { //el blanc esta al costat blau
                    if (cub[0][5] == 'g') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][5] == 'r') {
                        cop_90();
                        cop_90();
                        gir_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][5] == 'b') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][5] == 'n') {
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                    }
                } else if (cub[0][3] == 'w') { //el blanc esta al costat negre
                    if (cub[1][1] == 'b') {
                        cop_90();
                        cop_90();
                        gir_180();
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][1] == 'n') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][1] == 'g') {
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        base_90_AH();
                    } else if (cub[1][1] == 'r') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_90_H();
                    }
                } else if (cub[1][7] == 'w') { //el blanc esta al costat verd
                    if (cub[4][3] == 'b') {
                        cop_90();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                    } else if (cub[4][3] == 'n') {
                        cop_90();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                    } else if (cub[4][3] == 'g') {
                        cop_90();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                    } else if (cub[4][3] == 'r') {
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        base_180();
                    }

                    //comenca amb que el blanc esta a la cara dels colors a la part superior
                } else if (cub[0][7] == 'w') { //el blanc esta a la cara negra
                    if (cub[2][1] == 'n') {
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[2][1] == 'g') {
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        base_90_AH();
                    } else if (cub[2][1] == 'r') {
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[2][1] == 'b') {
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        base_90_H();
                    }
                } else if (cub[1][5] == 'w') { //el blanc esta a la cara verda
                    if (cub[2][3] == 'b') {
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                    } else if (cub[2][3] == 'n') {
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                    } else if (cub[2][3] == 'g') {
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                    } else if (cub[2][3] == 'r') {
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        base_180();
                    }
                } else if (cub[4][1] == 'w') { //el blanc esta al costat vermell
                    if (cub[2][7] == 'b') {
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        base_90_H();
                    } else if (cub[2][7] == 'n') {
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        cop_90();
                    } else if (cub[2][7] == 'g') {
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        base_90_AH();
                    } else if (cub[2][7] == 'r') {
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    }
                } else if (cub[3][3] == 'w') { //el blanc esta a la cara blava
                    if (cub[2][5] == 'b') {
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[2][5] == 'n') {
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                    } else if (cub[2][5] == 'g') {
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[2][5] == 'r') {
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        base_90_AH();
                        cop_90();
                        base_180();
                    }

                    //comenca si el blanc esta ben posat pero no l'altre color
                } else if (cub[2][1] == 'w') { //el blanc esta situat cap al negre
                    if (cub[0][7] == 'b') {
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][7] == 'g') {
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_180();
                    } else if (cub[0][7] == 'r') {
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_180();
                    }
                } else if (cub[2][3] == 'w') { //el blanc esta situat cap al verd
                    if (cub[1][5] == 'r') {
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][5] == 'b') {
                        base_90_AH();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_90_H();
                    } else if (cub[1][5] == 'n') {
                        base_90_AH();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_H();
                    }
                } else if (cub[2][7] == 'w') { //amb el blanc cap a la cara vermella
                    if (cub[4][1] == 'b') {
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                    } else if (cub[4][1] == 'n') {
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                    } else if (cub[4][1] == 'g') {
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                    }
                } else if (cub[2][5] == 'w') { //el blanc esta cap a la cara blava
                    if (cub[3][3] == 'n') {
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][3] == 'g') {
                        base_90_H();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        gir_180();
                        base_180();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_180();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    } else if (cub[3][3] == 'r') {
                        base_90_H();
                        cop_90();
                        gir_90_H();
                        cop_90();
                        gir_90_H();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        base_180();
                        cop_90();
                        gir_90_AH();
                        cop_90();
                        cop_90();
                        base_90_AH();
                    }
                }
            }

            //ha acabat la creu blanca
            //comenca amb les cantonades blanques

            for (i_cant_blanc = 1; i_cant_blanc <= 4; i_cant_blanc++) {
                //la cantonada a posar esta a baix a l'esquerra
                if (cub[4][6] == 'w') { //en el color vermell
                    if ((cub[1][6] == 'n') & (cub[5][0] == 'g')) {
                        base_90_AH();
                        gir_90_H();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[1][6] == 'b') & (cub[5][0] == 'n')) {
                        base_180();
                        gir_180();
                        cant_baix_esquerra();
                    } else if ((cub[1][6] == 'g') & (cub[5][0] == 'r')) {
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[1][6] == 'r') & (cub[5][0] == 'b')) {
                        base_90_H();
                        gir_90_AH();
                        cant_baix_esquerra();
                        base_90_H();
                    }
                } else if (cub[3][8] == 'w') { //en el color blau
                    if ((cub[4][8] == 'r') & (cub[5][2] == 'b')) {
                        base_90_H();
                        cant_baix_esquerra();
                        base_90_H();
                    } else if ((cub[4][8] == 'b') & (cub[5][2] == 'n')) {
                        gir_90_AH();
                        base_180();
                        cant_baix_esquerra();
                    } else if ((cub[4][8] == 'n') & (cub[5][2] == 'g')) {
                        base_90_AH();
                        gir_180();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[4][8] == 'g') & (cub[5][2] == 'r')) {
                        gir_90_H();
                        cant_baix_esquerra();
                        base_180();
                    }
                } else if (cub[0][2] == 'w') { //en el color negre
                    if ((cub[3][2] == 'b') & (cub[5][8] == 'n')) {
                        base_180();
                        cant_baix_esquerra();
                    } else if ((cub[3][2] == 'n') & (cub[5][8] == 'g')) {
                        gir_90_AH();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[3][2] == 'g') & (cub[5][8] == 'r')) {
                        gir_180();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[3][2] == 'r') & (cub[5][8] == 'b')) {
                        gir_90_H();
                        base_90_H();
                        cant_baix_esquerra();
                        base_90_H();
                    }
                } else if (cub[1][0] == 'w') { //en el color verd
                    if ((cub[0][0] == 'n') & (cub[5][6] == 'g')) {
                        base_90_AH();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[0][0] == 'g') & (cub[5][6] == 'r')) {
                        gir_90_AH();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[0][0] == 'r') & (cub[5][6] == 'b')) {
                        gir_180();
                        base_90_H();
                        cant_baix_esquerra();
                        base_90_H();
                    } else if ((cub[0][0] == 'b') & (cub[5][6] == 'n')) {
                        gir_90_H();
                        base_180();
                        cant_baix_esquerra();
                    }
                    //la cantonada a posar esta a baix a la dreta
                } else if (cub[4][8] == 'w') { //en el color vermell
                    if ((cub[3][8] == 'b') & (cub[5][2] == 'r')) {
                        cant_baix_dreta();
                        base_180();
                    } else if ((cub[3][8] == 'r') & (cub[5][2] == 'g')) {
                        gir_90_H();
                        base_90_AH();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[3][8] == 'g') & (cub[5][2] == 'n')) {
                        base_180();
                        gir_180();
                        cant_baix_dreta();
                    } else if ((cub[3][8] == 'n') & (cub[5][2] == 'b')) {
                        base_90_H();
                        gir_90_AH();
                        cant_baix_dreta();
                        base_90_H();
                    }
                } else if (cub[3][2] == 'w') { //en el color blau
                    if ((cub[0][2] == 'n') & (cub[5][8] == 'b')) {
                        base_90_H();
                        cant_baix_dreta();
                        base_90_H();
                    } else if ((cub[0][2] == 'g') & (cub[5][8] == 'n')) {
                        gir_90_AH();
                        base_180();
                        cant_baix_dreta();
                    } else if ((cub[0][2] == 'r') & (cub[5][8] == 'g')) {
                        gir_180();
                        base_90_AH();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[0][2] == 'b') & (cub[5][8] == 'r')) {
                        gir_90_H();
                        cant_baix_dreta();
                        base_180();
                    }
                } else if (cub[0][0] == 'w') { //en el color negre
                    if ((cub[1][0] == 'g') & (cub[5][6] == 'n')) {
                        base_180();
                        cant_baix_dreta();
                    } else if ((cub[1][0] == 'r') & (cub[5][6] == 'g')) {
                        gir_90_AH();
                        base_90_AH();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[1][0] == 'b') & (cub[5][6] == 'r')) {
                        gir_180();
                        cant_baix_dreta();
                        base_180();
                    } else if ((cub[1][0] == 'n') & (cub[5][6] == 'b')) {
                        base_90_H();
                        gir_90_H();
                        cant_baix_dreta();
                        base_90_H();
                    }
                } else if (cub[1][6] == 'w') { //en el color verd
                    if ((cub[4][6] == 'r') & (cub[5][0] == 'g')) {
                        base_90_AH();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[4][6] == 'g') & (cub[5][0] == 'n')) {
                        gir_90_H();
                        base_180();
                        cant_baix_dreta();
                    } else if ((cub[4][6] == 'n') & (cub[5][0] == 'b')) {
                        gir_180();
                        base_90_H();
                        cant_baix_dreta();
                        base_90_H();
                    } else if ((cub[4][6] == 'b') & (cub[5][0] == 'r')) {
                        gir_90_AH();
                        cant_baix_dreta();
                        base_180();
                    }
                    //ha acabat quan el blanc esta a baix a la dreta
                    //comenca quan el blanc esta al costat oposat
                } else if (cub[5][0] == 'w') { //el blanc esta a sota a la dreta del verd
                    if ((cub[1][6] == 'r') & (cub[4][6] == 'g')) {
                        cant_a_oposat();
                        base_180();
                    } else if ((cub[1][6] == 'g') & (cub[4][6] == 'n')) {
                        gir_90_H();
                        base_90_AH();
                        cant_a_oposat();
                        base_90_AH();
                    } else if ((cub[1][6] == 'n') & (cub[4][6] == 'b')) {
                        base_180();
                        gir_180();
                        cant_a_oposat();
                    } else if ((cub[1][6] == 'b') & (cub[4][6] == 'r')) {
                        gir_90_AH();
                        base_90_H();
                        cant_a_oposat();
                        base_90_H();
                    }
                } else if (cub[5][2] == 'w') { //el blanc esta a sota a la dreta del vermell
                    if ((cub[4][8] == 'b') & (cub[3][8] == 'r')) {
                        base_90_H();
                        cant_a_oposat();
                        base_90_H();
                    } else if ((cub[4][8] == 'r') & (cub[3][8] == 'g')) {
                        gir_90_H();
                        cant_a_oposat();
                        base_180();
                    } else if ((cub[4][8] == 'g') & (cub[3][8] == 'n')) {
                        gir_180();
                        base_90_AH();
                        cant_a_oposat();
                        base_90_AH();
                    } else if ((cub[4][8] == 'n') & (cub[3][8] == 'b')) {
                        base_180();
                        gir_90_AH();
                        cant_a_oposat();
                    }
                } else if (cub[5][8] == 'w') { //el blanc esta a sota a la dreta del blau
                    if ((cub[3][2] == 'n') & (cub[0][2] == 'b')) {
                        base_180();
                        cant_a_oposat();
                    } else if ((cub[3][2] == 'b') & (cub[0][2] == 'r')) {
                        gir_90_H();
                        base_90_H();
                        cant_a_oposat();
                        base_90_H();
                    } else if ((cub[3][2] == 'r') & (cub[0][2] == 'g')) {
                        gir_180();
                        cant_a_oposat();
                        base_180();
                    } else if ((cub[3][2] == 'g') & (cub[0][2] == 'n')) {
                        gir_90_AH();
                        base_90_AH();
                        cant_a_oposat();
                        base_90_AH();
                    }
                } else if (cub[5][6] == 'w') { //el blanc esta a sota a la dreta del negre
                    if ((cub[0][0] == 'g') & (cub[1][0] == 'n')) {
                        base_90_AH();
                        cant_a_oposat();
                        base_90_AH();
                    } else if ((cub[0][0] == 'r') & (cub[1][0] == 'g')) {
                        gir_90_AH();
                        cant_a_oposat();
                        base_180();
                    } else if ((cub[0][0] == 'b') & (cub[1][0] == 'r')) {
                        gir_180();
                        base_90_H();
                        cant_a_oposat();
                        base_90_H();
                    } else if ((cub[0][0] == 'n') & (cub[1][0] == 'b')) {
                        gir_90_H();
                        base_180();
                        cant_a_oposat();
                    }
                    //ja s'han acabat les possibilitats en que la cantonada estigui a sota de la cara blanca, a l'oposat
                    //la cantonada esta amb el blanc a la dreta a la part de dalt dels costats laterals
                } else if (cub[0][6] == 'w') { //el blanc esta a la dreta del negre
                    if ((cub[2][0] == 'g') & (cub[1][2] == 'n')) {
                        base_180();
                        cant_a_dalt_dreta_treure();
                        gir_90_H();
                        cant_baix_dreta();
                    } else if ((cub[2][0] == 'n') & (cub[1][2] == 'b')) {
                        base_180();
                        cant_a_dalt_dreta_treure();
                        gir_180();
                        base_90_AH();
                        cant_baix_dreta();
                        base_90_H();
                    } else if ((cub[2][0] == 'b') & (cub[1][2] == 'r')) {
                        base_180();
                        cant_a_dalt_dreta_treure();
                        gir_90_AH();
                        base_180();
                        cant_baix_dreta();
                        base_180();
                    } else if ((cub[2][0] == 'r') & (cub[1][2] == 'g')) {
                        base_180();
                        cant_a_dalt_dreta_treure();
                        base_90_H();
                        cant_baix_dreta();
                        base_90_AH();
                    }
                } else if (cub[1][8] == 'w') { //el blanc esta a la dreta del verd
                    if ((cub[2][6] == 'r') & (cub[4][0] == 'g')) {
                        base_90_AH();
                        cant_a_dalt_dreta_treure();
                        gir_90_H();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[2][6] == 'b') & (cub[4][0] == 'r')) {
                        base_90_AH();
                        cant_a_dalt_dreta_treure();
                        base_90_H();
                        cant_baix_dreta();
                        base_180();
                    } else if ((cub[2][6] == 'n') & (cub[4][0] == 'b')) {
                        base_90_AH();
                        cant_a_dalt_dreta_treure();
                        gir_90_AH();
                        base_180();
                        cant_baix_dreta();
                        base_90_H();
                    } else if ((cub[2][6] == 'b') & (cub[4][0] == 'r')) {
                        base_90_AH();
                        cant_a_dalt_dreta_treure();
                        base_90_H();
                        cant_baix_dreta();
                        base_180();
                    }
                } else if (cub[4][2] == 'w') { //el balnc esta a la dreta del vermell
                    if ((cub[2][8] == 'b') & (cub[3][6] == 'r')) {
                        cant_a_dalt_dreta_treure();
                        gir_90_H();
                        cant_baix_dreta();
                        base_180();
                    } else if ((cub[2][8] == 'r') & (cub[3][6] == 'g')) {
                        cant_a_dalt_dreta_treure();
                        gir_180();
                        base_90_AH();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[2][8] == 'g') & (cub[3][6] == 'n')) {
                        cant_a_dalt_dreta_treure();
                        gir_90_AH();
                        base_180();
                        cant_baix_dreta();
                    } else if ((cub[2][8] == 'n') & (cub[3][6] == 'b')) {
                        cant_a_dalt_dreta_treure();
                        base_90_H();
                        cant_baix_dreta();
                        base_90_H();
                    }
                } else if (cub[3][0] == 'w') { //el blanc esta a la dreta del blau
                    if ((cub[2][2] == 'n') & (cub[0][8] == 'b')) {
                        base_90_H();
                        cant_a_dalt_dreta_treure();
                        gir_90_H();
                        cant_baix_dreta();
                        base_90_H();
                    } else if ((cub[2][2] == 'g') & (cub[0][8] == 'n')) {
                        base_90_H();
                        cant_a_dalt_dreta_treure();
                        base_90_H();
                        cant_baix_dreta();
                    } else if ((cub[2][2] == 'r') & (cub[0][8] == 'g')) {
                        base_90_H();
                        cant_a_dalt_dreta_treure();
                        gir_90_AH();
                        base_180();
                        cant_baix_dreta();
                        base_90_AH();
                    } else if ((cub[2][2] == 'b') & (cub[0][8] == 'r')) {
                        base_90_H();
                        cant_a_dalt_dreta_treure();
                        gir_180();
                        base_90_AH();
                        cant_baix_dreta();
                        base_180();
                    }
                    //comenca amb la cantonada amb el blanc esta a dalt a l'esquerra
                } else if (cub[4][0] == 'w') { //el blanc esta a l'esquerra del vermell
                    if ((cub[2][6] == 'r') & (cub[1][8] == 'b')) {
                        cant_a_dalt_esquerra_treure();
                        gir_180();
                        base_90_H();
                        cant_baix_esquerra();
                        base_90_H();
                    } else if ((cub[2][6] == 'b') & (cub[1][8] == 'n')) {
                        cant_a_dalt_esquerra_treure();
                        gir_90_H();
                        base_180();
                        cant_baix_esquerra();
                    } else if ((cub[2][6] == 'n') & (cub[1][8] == 'g')) {
                        cant_a_dalt_esquerra_treure();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[2][6] == 'g') & (cub[1][8] == 'r')) {
                        cant_a_dalt_esquerra_treure();
                        gir_90_AH();
                        cant_baix_esquerra();
                        base_180();
                    }
                } else if (cub[3][6] == 'w') { //el blanc esta a l'esquerra del blau
                    if ((cub[2][8] == 'n') & (cub[4][2] == 'g')) {
                        base_90_H();
                        cant_a_dalt_esquerra_treure();
                        gir_90_H();
                        base_180();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[2][8] == 'g') & (cub[4][2] == 'r')) {
                        base_90_H();
                        cant_a_dalt_esquerra_treure();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[2][8] == 'b') & (cub[4][2] == 'n')) {
                        base_90_H();
                        cant_a_dalt_esquerra_treure();
                        gir_180();
                        base_90_H();
                        cant_baix_esquerra();
                    } else if ((cub[2][8] == 'r') & (cub[4][2] == 'b')) {
                        base_90_H();
                        cant_a_dalt_esquerra_treure();
                        gir_90_AH();
                        cant_baix_esquerra();
                        base_90_H();
                    }
                } else if (cub[0][8] == 'w') { //el blanc esta al costat esquerra del negre
                    if ((cub[2][2] == 'b') & (cub[3][0] == 'n')) {
                        base_180();
                        cant_a_dalt_esquerra_treure();
                        gir_90_AH();
                        cant_baix_esquerra();
                    } else if ((cub[2][2] == 'n') & (cub[3][0] == 'g')) {
                        base_180();
                        cant_a_dalt_esquerra_treure();
                        gir_180();
                        base_90_H();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[2][2] == 'g') & (cub[3][0] == 'r')) {
                        base_180();
                        cant_a_dalt_esquerra_treure();
                        gir_90_H();
                        base_180();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[2][2] == 'r') & (cub[3][0] == 'b')) {
                        base_180();
                        cant_a_dalt_esquerra_treure();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_90_H();
                    }
                } else if (cub[1][2] == 'w') { //el blanc esta al costat del verd
                    if ((cub[2][0] == 'n') & (cub[0][6] == 'g')) {
                        base_90_AH();
                        cant_a_dalt_esquerra_treure();
                        gir_90_AH();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[2][0] == 'g') & (cub[0][6] == 'r')) {
                        base_90_AH();
                        cant_a_dalt_esquerra_treure();
                        gir_180();
                        base_90_H();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[2][0] == 'r') & (cub[0][6] == 'b')) {
                        base_90_AH();
                        cant_a_dalt_esquerra_treure();
                        gir_90_H();
                        base_180();
                        cant_baix_esquerra();
                        base_90_H();
                    } else if ((cub[2][0] == 'b') & (cub[0][6] == 'n')) {
                        base_90_AH();
                        cant_a_dalt_esquerra_treure();
                        base_90_AH();
                        cant_baix_esquerra();
                    }
                    //comenca amb l'ultim cas
                } else if (cub[2][8] == 'w') { //el costat vermell per la dreta
                    if ((cub[4][2] == 'b') & (cub[3][6] == 'n')) {
                        treure_de_dalt();
                        base_180();
                        cant_baix_esquerra();
                    } else if ((cub[4][2] == 'n') & (cub[3][6] == 'g')) {
                        treure_de_dalt();
                        gir_90_AH();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[4][2] == 'g') & (cub[3][6] == 'r')) {
                        treure_de_dalt();
                        gir_180();
                        cant_baix_esquerra();
                        base_180();
                    }
                } else if (cub[2][2] == 'w') { //el costat blau per la dreta
                    if ((cub[3][0] == 'n') & (cub[0][8] == 'g')) {
                        base_90_H();
                        treure_de_dalt();
                        base_180();
                        cant_baix_esquerra();
                        base_90_AH();
                    } else if ((cub[3][0] == 'g') & (cub[0][8] == 'r')) {
                        base_90_H();
                        treure_de_dalt();
                        gir_90_AH();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[3][0] == 'r') & (cub[0][8] == 'b')) {
                        base_90_H();
                        treure_de_dalt();
                        gir_180();
                        cant_baix_esquerra();
                        base_90_H();
                    }
                } else if (cub[2][0] == 'w') { //el costat negre per la dreta
                    if ((cub[0][6] == 'b') & (cub[1][2] == 'n')) {
                        base_180();
                        treure_de_dalt();
                        gir_180();
                        cant_baix_esquerra();
                    } else if ((cub[0][6] == 'g') & (cub[1][2] == 'r')) {
                        base_180();
                        treure_de_dalt();
                        base_180();
                        cant_baix_esquerra();
                        base_180();
                    } else if ((cub[0][6] == 'r') & (cub[1][2] == 'b')) {
                        base_180();
                        treure_de_dalt();
                        gir_90_AH();
                        base_90_AH();
                        cant_baix_esquerra();
                        base_90_H();
                    }
                } else if (cub[2][6] == 'w') { //el costat verd per la dreta
                    if ((cub[1][8] == 'r') & (cub[4][0] == 'b')) {
                        base_90_AH();
                        treure_de_dalt();
                        base_180();
                        cant_baix_esquerra();
                        base_90_H();
                    } else if ((cub[1][8] == 'b') & (cub[4][0] == 'n')) {
                        base_90_AH();
                        treure_de_dalt();
                        gir_90_AH();
                        base_90_AH();
                        cant_baix_esquerra();
                    } else if ((cub[1][8] == 'n') & (cub[4][0] == 'g')) {
                        base_90_AH();
                        treure_de_dalt();
                        gir_180();
                        cant_baix_esquerra();
                        base_90_AH();
                    }
                }
            }

            //ha acabat les cantonades i per tant la cara blanca
            //comenca amb la segona linia
            cop_90();
            cop_90();

            i_segona_linia = 0;
            for (i_segona_linia = 0; i_segona_linia <= 4; i_segona_linia++) {
                //comencem pel vermell i verd
                //el verd esta a dalt i el vermell al lateral
                if ((cub[0][7] == 'r') & (cub[2][1] == 'g')) {
                    base_180();
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    segona_linia_esquerra();
                } else if ((cub[1][5] == 'r') & (cub[2][3] == 'g')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_180();
                    segona_linia_esquerra();
                } else if ((cub[4][1] == 'r') & (cub[2][7] == 'g')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_180();
                    segona_linia_esquerra();
                } else if ((cub[3][3] == 'r') & (cub[2][5] == 'g')) {
                    base_180();
                    segona_linia_esquerra();
                    //el vermell esta a dalt i el verd al lateral
                } else if ((cub[0][7] == 'g') & (cub[2][1] == 'r')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    segona_linia_dreta();
                    base_90_AH();
                } else if ((cub[1][5] == 'g') & (cub[2][3] == 'r')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    segona_linia_dreta();
                    base_90_AH();
                } else if ((cub[4][1] == 'g') & (cub[2][7] == 'r')) {
                    base_90_AH();
                    segona_linia_dreta();
                    base_90_AH();
                } else if ((cub[3][3] == 'g') & (cub[2][5] == 'r')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    segona_linia_dreta();
                    base_90_AH();
                    //comenca amb la peca blava i vermella
                    //el blau esta a dalt i el vermell al lateral
                } else if ((cub[0][7] == 'r') & (cub[2][1] == 'b')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_180();
                    segona_linia_dreta();
                } else if ((cub[1][5] == 'r') & (cub[2][3] == 'b')) {
                    base_180();
                    segona_linia_dreta();
                } else if ((cub[4][1] == 'r') & (cub[2][7] == 'b')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_180();
                    segona_linia_dreta();
                } else if ((cub[3][3] == 'r') & (cub[2][5] == 'b')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_180();
                    segona_linia_dreta();
                    //el vermell esta a dalt i el blau al lateral
                } else if ((cub[0][7] == 'b') & (cub[2][1] == 'r')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_90_H();
                    segona_linia_esquerra();
                    base_90_H();
                } else if ((cub[1][5] == 'b') & (cub[2][3] == 'r')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_90_H();
                    segona_linia_esquerra();
                    base_90_H();
                } else if ((cub[4][1] == 'b') & (cub[2][7] == 'r')) {
                    base_90_H();
                    segona_linia_esquerra();
                    base_90_H();
                } else if ((cub[3][3] == 'b') & (cub[2][5] == 'r')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_90_H();
                    segona_linia_esquerra();
                    base_90_H();
                    //comenca amb la peca blava i negra
                    //el negre esta a dalt i el blau al lateral
                } else if ((cub[0][7] == 'b') & (cub[2][1] == 'n')) {
                    base_90_H();
                    segona_linia_dreta();
                    base_90_H();
                } else if ((cub[1][5] == 'b') & (cub[2][3] == 'n')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_90_H();
                    segona_linia_dreta();
                    base_90_H();
                } else if ((cub[4][1] == 'b') & (cub[2][7] == 'n')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_90_H();
                    segona_linia_dreta();
                    base_90_H();
                } else if ((cub[3][3] == 'b') & (cub[2][5] == 'n')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_90_H();
                    segona_linia_dreta();
                    base_90_H();
                    //el blau esta a dalt i el negre al lateral
                } else if ((cub[0][7] == 'n') & (cub[2][1] == 'b')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    segona_linia_esquerra();
                    base_180();
                } else if ((cub[1][5] == 'n') & (cub[2][3] == 'b')) {
                    segona_linia_esquerra();
                    base_180();
                } else if ((cub[4][1] == 'n') & (cub[2][7] == 'b')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    segona_linia_esquerra();
                    base_180();
                } else if ((cub[3][3] == 'n') & (cub[2][5] == 'b')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    segona_linia_esquerra();
                    base_180();
                    //comenca amb la peca negra i verda
                    //el verd esta a dalt i el negre al lateral
                } else if ((cub[0][7] == 'n') & (cub[2][1] == 'g')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    segona_linia_dreta();
                    base_180();
                } else if ((cub[1][5] == 'n') & (cub[2][3] == 'g')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    segona_linia_dreta();
                    base_180();
                } else if ((cub[4][1] == 'n') & (cub[2][7] == 'g')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    segona_linia_dreta();
                    base_180();
                } else if ((cub[3][3] == 'n') & (cub[2][5] == 'g')) {
                    segona_linia_dreta();
                    base_180();
                    //el negre esta a dalt i el verd al lateral
                } else if ((cub[0][7] == 'g') & (cub[2][1] == 'n')) {
                    base_90_AH();
                    segona_linia_esquerra();
                    base_90_AH();
                } else if ((cub[1][5] == 'g') & (cub[2][3] == 'n')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    segona_linia_esquerra();
                    base_90_AH();
                } else if ((cub[4][1] == 'g') & (cub[2][7] == 'n')) {
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    segona_linia_esquerra();
                    base_90_AH();
                } else if ((cub[3][3] == 'g') & (cub[2][5] == 'n')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    segona_linia_esquerra();
                    base_90_AH();
                    //cas en que estiguin la peca be pero al reves
                } else if ((cub[4][5] == 'b') & (cub[3][7] == 'n')) {
                    girar_aresta_2l();
                } else if ((cub[3][1] == 'r') & (cub[0][5] == 'b')) {
                    base_90_H();
                    girar_aresta_2l();
                    base_90_AH();
                } else if ((cub[0][3] == 'g') & (cub[1][1] == 'r')) {
                    base_180();
                    girar_aresta_2l();
                    base_180();
                } else if ((cub[4][3] == 'g') & (cub[1][7] == 'n')) {
                    base_90_AH();
                    girar_aresta_2l();
                    base_90_H();
                    //ja ha acabat tot. Fem quan esta la peca col-locada al lloc pero no la que toca
                    //verd-vermell
                } else if ((i_segona_linia == 4) & ((cub[0][3] != 'r') | (cub[1][1] != 'g'))) {
                    i_segona_linia = 1;
                    base_90_AH();
                    segona_linia_dreta();
                    base_90_AH();
                    //verd-negre
                } else if ((i_segona_linia == 4) & ((cub[1][7] != 'g') | (cub[4][3] != 'n'))) {
                    i_segona_linia = 1;
                    segona_linia_dreta();
                    base_180();
                    //negre-blau
                } else if ((i_segona_linia == 4) & ((cub[4][5] != 'n') | (cub[3][7] != 'b'))) {
                    i_segona_linia = 1;
                    segona_linia_esquerra();
                    base_180();
                    //blau-vermel
                } else if ((i_segona_linia == 4) & ((cub[3][1] != 'b') | (cub[0][5] != 'r'))) {
                    i_segona_linia = 1;
                    base_180();
                    segona_linia_dreta();
                }
            }

            //comenca amb la darrera cara :D :D.
            //comenca amb la creu groga
            //si no hi ha res groc a la cara de dalt excepte el centre
            if ((cub[2][1] != 'y') & (cub[2][3] != 'y') & (cub[2][5] != 'y') & (cub[2][7] != 'y')) {
                l_groga();
                base_90_AH();
                linia_groga();
                base_90_H();
                //si hi ha la linia
            } else if ((cub[2][3] == 'y') & (cub[2][5] == 'y') & (cub[2][1] != 'y') & (cub[2][7] != 'y')) {
                linia_groga();
            } else if ((cub[2][3] != 'y') & (cub[2][5] != 'y') & (cub[2][1] == 'y') & (cub[2][7] == 'y')) {
                base_90_AH();
                linia_groga();
                base_90_H();
                //si hi ha la ela:
                //verd-vermell
            } else if ((cub[2][3] == 'y') & (cub[2][5] != 'y') & (cub[2][1] == 'y') & (cub[2][7] != 'y')) {
                l_groga();
                //verd-negre
            } else if ((cub[2][3] == 'y') & (cub[2][5] != 'y') & (cub[2][1] != 'y') & (cub[2][7] == 'y')) {
                base_90_H();
                l_groga();
                base_90_AH();
                //negre-blau
            } else if ((cub[2][3] != 'y') & (cub[2][5] == 'y') & (cub[2][1] != 'y') & (cub[2][7] == 'y')) {
                base_180();
                l_groga();
                base_180();
                //blau-vermell
            } else if ((cub[2][3] != 'y') & (cub[2][5] == 'y') & (cub[2][1] == 'y') & (cub[2][7] != 'y')) {
                base_90_AH();
                l_groga();
                base_90_H();
            }
            //ja te la creu!
            //si no hi ha cap cantonada posada a la cara groga
            if ((cub[2][0] != 'y') & (cub[2][2] != 'y') & (cub[2][6] != 'y') & (cub[2][8] != 'y')) {
                if (cub[0][8] == 'y') {
                    base_180();
                    gir_per_peix();
                    base_180();
                    gir_per_peix();
                } else if (cub[1][2] == 'y') {
                    base_90_AH();
                    gir_per_peix();
                    base_180();
                    gir_per_peix();
                    base_90_AH();
                } else if (cub[4][0] == 'y') {
                    gir_per_peix();
                    base_180();
                    gir_per_peix();
                    base_180();
                } else if (cub[3][6] == 'y') {
                    base_90_H();
                    gir_per_peix();
                    base_180();
                    gir_per_peix();
                    base_90_H();
                }
            }
            //aqui passa que hi ha 2 cantonades posades a la cara groga
            int variable_per_a_res;
            if ((cub[2][0] == 'y') & (cub[2][2] != 'y') & (cub[2][6] != 'y') & (cub[2][8] != 'y')) {
                variable_per_a_res = 0;
            } else if ((cub[2][0] != 'y') & (cub[2][2] == 'y') & (cub[2][6] != 'y') & (cub[2][8] != 'y')) {
                variable_per_a_res = 0;
            } else if ((cub[2][0] != 'y') & (cub[2][2] != 'y') & (cub[2][6] == 'y') & (cub[2][8] != 'y')) {
                variable_per_a_res = 0;
            } else if ((cub[2][0] != 'y') & (cub[2][2] != 'y') & (cub[2][6] != 'y') & (cub[2][8] == 'y')) {
                variable_per_a_res = 0;
            } else {
                if (cub[0][8] == 'y') {
                    base_180();
                    gir_per_peix();
                    base_180();
                } else if (cub[1][2] == 'y') {
                    base_90_AH();
                    gir_per_peix();
                    base_90_H();
                } else if (cub[4][0] == 'y') {
                    gir_per_peix();
                } else if (cub[3][6] == 'y') {
                    base_90_H();
                    gir_per_peix();
                    base_90_AH();
                }
            }

            //ja te el peix fet!!

            //ara recordar que potser ha de fer el moviment peix dues vegades!!
            if ((cub[2][2] == 'y') & (cub[2][0] != 'y') & (cub[2][6] != 'y') & (cub[2][8] != 'y')) {
                if (cub[3][6] == 'y') {
                    base_90_H();
                    tota_ultima_cara();
                    base_90_AH();
                } else {
                    base_90_H();
                    tota_ultima_cara();
                    base_180();
                    tota_ultima_cara();
                    base_90_H();
                }
            } else if ((cub[2][2] != 'y') & (cub[2][0] == 'y') & (cub[2][6] != 'y') & (cub[2][8] != 'y')) {
                if (cub[3][6] == 'y') {
                    base_180();
                    tota_ultima_cara();
                    base_180();
                } else {
                    base_180();
                    tota_ultima_cara();
                    base_180();
                    tota_ultima_cara();
                }
            } else if ((cub[2][2] != 'y') & (cub[2][0] != 'y') & (cub[2][6] == 'y') & (cub[2][8] != 'y')) {
                if (cub[3][6] == 'y') {
                    base_90_AH();
                    tota_ultima_cara();
                    base_90_H();
                } else {
                    base_90_AH();
                    tota_ultima_cara();
                    base_180();
                    tota_ultima_cara();
                    base_90_AH();
                }
            } else if ((cub[2][2] != 'y') & (cub[2][0] != 'y') & (cub[2][6] != 'y') & (cub[2][8] == 'y')) {
                if (cub[1][2] == 'y') {
                    tota_ultima_cara();
                } else {
                    tota_ultima_cara();
                    base_180();
                    tota_ultima_cara();
                    base_180();
                }
            }
            //ara la cara groga esta tota groga. S'ha de recol-locar
            int c_a_g; //variable per comprovar si ha fet o no les arestes grogues
            c_a_g = 0;
            //fem les arestes
            //primer cas: nomes s'ha de girar la cara groga fins que quedin be per fer l'algoritme
            //comencem amb el blau
            if ((cub[0][7] == 'b') & (c_a_g == 0)) { //el blau al costat vermell
                if ((cub[4][1] == 'g') & (cub[3][3] == 'n') & (cub[1][5] == 'r')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[4][1] != 'g') & (cub[1][5] != 'r') & (cub[3][3] != 'n')) { //mira que nomes aquest color  estigui bben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_90_H();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'g') & (cub[1][5] != 'n')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'g') & (cub[3][3] != 'r')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_AH();
                } else if (cub[4][1] == 'g') {
                    arestes_grogues_esquerra();
                    base_90_H();
                    arestes_grogues_esquerra();
                    base_90_AH();
                    c_a_g = 1;
                }
            }

            if ((cub[1][5] == 'b') & (c_a_g == 0)) { //el blau al costat verd
                if ((cub[3][3] == 'g') & (cub[0][7] == 'n') & (cub[4][1] == 'r')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[3][3] != 'g') & (cub[4][1] != 'r') & (cub[0][7] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_90_H();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'g') & (cub[1][5] != 'n')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'g') & (cub[3][3] != 'r')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_AH();
                } else if (cub[3][3] == 'g') {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[4][1] == 'b') & (c_a_g == 0)) { //el blau al costat negre
                if ((cub[0][7] == 'g') & (cub[1][5] == 'n') & (cub[3][3] == 'r')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[0][7] != 'g') & (cub[3][3] != 'r') & (cub[1][5] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_90_H();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'g') & (cub[1][5] != 'n')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'g') & (cub[3][3] != 'r')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_AH();
                } else if (cub[0][7] == 'g') {
                    arestes_grogues_dreta();
                    base_90_AH();
                    arestes_grogues_dreta();
                    base_90_H();
                    c_a_g = 1;
                }
            }

            if ((cub[3][3] == 'b') & (c_a_g == 0)) { //el blau al costat blau
                if ((cub[1][5] != 'g') & (cub[0][7] != 'r') & (cub[4][1] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    base_90_H();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'g') & (cub[1][5] != 'n')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'g') & (cub[3][3] != 'r')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_AH();
                } else if ((cub[1][5] == 'g') & (cub[4][1] != 'n')) {
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            //costat vermell

            if ((cub[1][5] == 'r') & (c_a_g == 0)) { //el vermell esta al costat verd
                if ((cub[4][1] == 'g') & (cub[3][3] == 'n') & (cub[0][7] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[4][1] != 'g') & (cub[0][7] != 'b') & (cub[3][3] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_180();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'n') & (cub[1][5] != 'b')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'n') & (cub[3][3] != 'g')) {
                        arestes_grogues_esquerra();
                    }
                    base_180();
                } else if (cub[3][3] == 'n') {
                    arestes_grogues_esquerra();
                    base_180();
                    arestes_grogues_dreta();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[4][1] == 'r') & (c_a_g == 0)) { //el vermell esta al costat negre
                if ((cub[3][3] == 'g') & (cub[0][7] == 'n') & (cub[1][5] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[3][3] != 'g') & (cub[1][5] != 'b') & (cub[0][7] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_180();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'n') & (cub[1][5] != 'b')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'n') & (cub[3][3] != 'g')) {
                        arestes_grogues_esquerra();
                    }
                    base_180();
                } else if (cub[0][7] == 'n') {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_esquerra();
                    base_180();
                    arestes_grogues_dreta();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[3][3] == 'r') & (c_a_g == 0)) { //el vermell esta al costat blau
                if ((cub[0][7] == 'g') & (cub[1][5] == 'n') & (cub[4][1] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[0][7] != 'g') & (cub[4][1] != 'b') & (cub[1][5] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_180();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'n') & (cub[1][5] != 'b')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'n') & (cub[3][3] != 'g')) {
                        arestes_grogues_esquerra();
                    }
                    base_180();
                } else if (cub[1][5] == 'n') {
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[0][7] == 'r') & (c_a_g == 0)) { //el vermell esta al costat vermell
                if ((cub[1][5] != 'g') & (cub[3][3] != 'b') & (cub[4][1] != 'n')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    base_180();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'n') & (cub[1][5] != 'b')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'n') & (cub[3][3] != 'g')) {
                        arestes_grogues_esquerra();
                    }
                    base_180();
                } else if ((cub[4][1] == 'n') & (cub[3][3] != 'b')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }
            //costat negre

            if ((cub[3][3] == 'n') & (c_a_g == 0)) { //el negre esta al costat blau
                if ((cub[4][1] == 'g') & (cub[1][5] == 'r') & (cub[0][7] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[4][1] != 'g') & (cub[0][7] != 'b') & (cub[1][5] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'r') & (cub[1][5] != 'g')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'r') & (cub[3][3] != 'b')) {
                        arestes_grogues_esquerra();
                    }
                } else if (cub[1][5] == 'r') {
                    arestes_grogues_esquerra();
                    base_180();
                    arestes_grogues_dreta();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[0][7] == 'n') & (c_a_g == 0)) { //el negre esta al costat vermell
                if ((cub[3][3] == 'g') & (cub[4][1] == 'r') & (cub[1][5] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[3][3] != 'g') & (cub[1][5] != 'b') & (cub[4][1] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'r') & (cub[1][5] != 'g')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'r') & (cub[3][3] != 'b')) {
                        arestes_grogues_esquerra();
                    }
                } else if (cub[4][1] == 'r') {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_esquerra();
                    base_180();
                    arestes_grogues_dreta();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[1][5] == 'n') & (c_a_g == 0)) { //el negre esta al costat verd
                if ((cub[0][7] == 'g') & (cub[3][3] == 'r') & (cub[4][1] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[0][7] != 'g') & (cub[4][1] != 'b') & (cub[3][3] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'r') & (cub[1][5] != 'g')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'r') & (cub[3][3] != 'b')) {
                        arestes_grogues_esquerra();
                    }
                } else if (cub[3][3] == 'r') {
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[4][1] == 'n') & (c_a_g == 0)) { //el negre esta al costat negre
                if ((cub[1][5] != 'g') & (cub[3][3] != 'b') & (cub[0][7] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'r') & (cub[1][5] != 'g')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'r') & (cub[3][3] != 'b')) {
                        arestes_grogues_esquerra();
                    }
                } else if ((cub[4][1] == 'r') & (cub[3][3] != 'b')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            //color verd

            if ((cub[4][1] == 'g') & (c_a_g == 0)) { //el verd esta al costat negre
                if ((cub[3][3] == 'n') & (cub[1][5] == 'r') & (cub[0][7] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[3][3] != 'n') & (cub[0][7] != 'b') & (cub[1][5] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'b') & (cub[1][5] != 'r')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'b') & (cub[3][3] != 'n')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_H();
                } else if (cub[0][7] == 'b') {
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[3][3] == 'g') & (c_a_g == 0)) { //el verd esta al costat blau
                if ((cub[0][7] == 'n') & (cub[4][1] == 'r') & (cub[1][5] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[0][7] != 'n') & (cub[1][5] != 'b') & (cub[4][1] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_180();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'b') & (cub[1][5] != 'r')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'b') & (cub[3][3] != 'n')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_H();
                } else if (cub[1][5] == 'b') {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_dreta();
                    base_180();
                    arestes_grogues_esquerra();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[0][7] == 'g') & (c_a_g == 0)) { //el verd esta al costat vermell
                if ((cub[1][5] == 'n') & (cub[3][3] == 'r') & (cub[4][1] == 'b')) { //comprova que estigui be i que nomes calgui girar
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    c_a_g = 1;
                } else if ((cub[1][5] != 'n') & (cub[4][1] != 'b') & (cub[3][3] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    cop_90();
                    cop_90();
                    gir_90_H();
                    cop_90();
                    cop_90();
                    base_90_AH();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'b') & (cub[1][5] != 'r')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'b') & (cub[3][3] != 'n')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_H();
                } else if (cub[4][1] == 'b') {
                    arestes_grogues_esquerra();
                    base_180();
                    arestes_grogues_dreta();
                    base_180();
                    c_a_g = 1;
                }
            }

            if ((cub[1][5] == 'g') & (c_a_g == 0)) { //el verd esta al costat verd
                if ((cub[4][1] != 'n') & (cub[3][3] != 'b') & (cub[0][7] != 'r')) { //mira que nomes aquest color  estigui ben posat
                    //posa aquest color al seu lloc
                    base_90_AH();
                    c_a_g = 1;
                    //casos en que calgui fer el esquerra o dreta
                    if ((cub[3][3] == 'b') & (cub[1][5] != 'r')) {
                        arestes_grogues_dreta();
                    } else if ((cub[1][5] == 'b') & (cub[3][3] != 'n')) {
                        arestes_grogues_esquerra();
                    }
                    base_90_H();
                } else if ((cub[3][3] == 'b') & (cub[4][1] != 'n')) {
                    cop_90();
                    cop_90();
                    gir_90_AH();
                    cop_90();
                    cop_90();
                    arestes_grogues_esquerra();
                    base_180();
                    arestes_grogues_dreta();
                    base_180();
                    c_a_g = 1;
                }
            }

            //ultima part: cantonades de la cara groga :D :D :D :D :D :D :D
            u_p_var = 0;
            while (u_p_var == 0) {
                if ((cub[1][2] == 'g') & (cub[0][6] == 'r')) { //cantonada verda/vermella
                    if ((cub[3][0] == 'g') & (cub[0][8] == 'n')) {
                        ultim_pas();
                    } else if ((cub[3][0] == 'n') & (cub[0][8] == 'b')) {
                        ultim_pas();
                        base_180();
                        ultim_pas();
                    }
                    u_p_var = 1;
                } else if ((cub[4][0] == 'n') & (cub[1][8] == 'g')) { //cantonada verda/negra
                    if ((cub[4][2] == 'b') & (cub[3][6] == 'r')) {
                        base_90_H();
                        ultim_pas();
                    } else if ((cub[4][2] == 'r') & (cub[3][6] == 'g')) {
                        base_90_H();
                        ultim_pas();
                        base_180();
                        ultim_pas();
                    }
                    u_p_var = 1;
                } else if ((cub[3][6] == 'b') & (cub[4][2] == 'n')) { //cantonada blava/negra
                    if ((cub[3][0] == 'r') & (cub[0][8] == 'g')) {
                        base_180();
                        ultim_pas();
                    } else if ((cub[3][0] == 'g') & (cub[0][8] == 'n')) {
                        base_180();
                        ultim_pas();
                        base_180();
                        ultim_pas();
                    }
                    u_p_var = 1;
                } else if ((cub[0][8] == 'r') & (cub[3][0] == 'b')) { //cantonada blava/vermella
                    if ((cub[0][6] == 'g') & (cub[1][2] == 'n')) {
                        base_90_AH();
                        ultim_pas();
                    } else if ((cub[0][6] == 'n') & (cub[1][2] == 'b')) {
                        base_90_AH();
                        ultim_pas();
                        base_180();
                        ultim_pas();
                    }
                    u_p_var = 1;
                } else {
                    ultim_pas();
                    base_180();
                }
            }
            eraseDisplay();
            displayCenteredBigTextLine(1, "CUB RESOLT");
            displayCenteredBigTextLine(4, "Girs totals:");
            displayCenteredBigTextLine(6, "%i", cmr);
            displayCenteredTextLine(9, "Moviments totals:");
            displayCenteredBigTextLine(10, "%i", cmt);
            moveMotorTarget(base, 5040, 40);
            waitUntilMotorStop(base);
        }
    }
}